# Description: Postscript interpreter
# URL:         http://www.ghostscript.com/awki
# Maintainer:  Juergen Daubert, juergen dot daubert at t-online dot de
# Arch Maintainer: Lucas Hazel, lucas at die dot net dot au
# Depends on:  cups, fontconfig, xorg-libxt, xorg-libxext

name=ghostscript
version=8.64
release=1
source=(http://dl.sourceforge.net/sourceforge/$name/$name-$version.tar.bz2 \
        http://dl.sourceforge.net/sourceforge/gs-fonts/$name-fonts-std-8.11.tar.gz)

build () {
    export CFLAGS="$CFLAGS -fPIC"
    cd $name-$version

    ./configure --prefix=/usr \
                --mandir=/usr/man \
                --enable-cups \
                --disable-gtk \
                --with-drivers=ALL
    make -j1 so
    make DESTDIR=$PKG install soinstall
    cp -r $SRC/fonts $PKG/usr/share/ghostscript

    mv $PKG/usr/bin/gsc $PKG/usr/bin/gs
    rm $PKG/usr/bin/gsx
    chown root:lp $PKG/etc/cups
    rm -r $PKG/usr/{share/ghostscript/$version/{examples,doc},man/de}
    rm $PKG/usr/share/ghostscript/fonts/[CRT]*
}
