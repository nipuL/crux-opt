# Description: Secure PinEntry Dialog
# URL: http://www.gnupg.org
# Maintainer: Simon Gloﬂner, viper at hometux dot de
# Packager: Alan Mizrahi, alan at mizrahi dot com dot ve
# Depends on: ncurses, xorg-libx11
# Nice to have: gtk, qt3

name=pinentry
version=0.7.5
release=2
source=(ftp://ftp.gnupg.org/gcrypt/$name/$name-$version.tar.gz $name-$version.patch)

build() {
    cd $name-$version

    patch -p1 < $SRC/$name-$version.patch
        
    ./configure \
  --prefix=/usr \
  --with-qt-dir=/usr/share/qt3 \
  --enable-fallback-curses \
  --disable-pinentry-gtk
    cd qt
    moc-qt3 pinentrydialog.h > pinentrydialog.moc
    moc-qt3  secqlineedit.h >  secqlineedit.moc
    cd ..
    make
    make DESTDIR=$PKG install

    rm -rf $PKG/usr/share
}
