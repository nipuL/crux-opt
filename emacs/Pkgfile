# Description: an extensible, customizable, self-documenting real-time display editor
# URL: http://www.gnu.org/software/emacs/
# Maintainer: Antti Nykänen, aon at iki dot fi
# Packager: Per Lidén, per at fukt dot bth dot se
# Depends on: x11, libtiff

name=emacs
version=21.4a
release=1
source=(http://ftp.gnu.org/gnu/$name/$name-$version.tar.gz)

build() {
    cd $name-21.4
    ./configure --prefix=/usr \
		--libexecdir=/usr/lib \
		--with-x
    make
    make prefix=$PKG/usr libexecdir=$PKG/usr/lib install
    rm -rf $PKG/usr/bin/emacs-21.4 $PKG/usr/info
    find $PKG/usr/share/emacs -name "*.el" | while read file; do
	[ -f ${file}c ] && rm -f $file
    done
    chown -R root.root $PKG
    find $PKG/usr/share -type d -exec chmod 755 {} \;
    find $PKG/usr/share -type f -exec chmod 644 {} \;
}
