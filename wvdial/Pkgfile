# Description: Weave Dial - PPP dialer
# URL:         http://open.nit.ca/wiki/?page=WvDial
# Maintainer:  Juergen Daubert, juergen dot daubert at t-online dot de
# Arch Maintainer: Fredrik Rinnestam, fredrik at obra dot se
# Depends on:  ppp, openssl

name=wvdial
version=1.60
release=2
source=(http://alumnit.ca/download/$name-$version.tar.gz \
        http://wvstreams.googlecode.com/files/wvstreams-4.4.1.tar.gz \
        $name-$version.patch wvstreams-gcc-4.3.patch)

build() {
    cd wvstreams-4.4.1
    ./configure --prefix=/usr \
                --enable-verbose \
                --without-{pam,tcl,qt}
    patch -p0 -i ../wvstreams-gcc-4.3.patch
    make
    ln -s ../xplc/include/xplc include/xplc

    cd $SRC/$name-$version
    patch -p1 < $SRC/$name-$version.patch
    make CXXOPTS="$CXXFLAGS" WVS=$SRC/wvstreams-4.4.1
    make DESTDIR=$PKG install
}
