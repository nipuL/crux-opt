# Description: Python interpreter, version 2.5
# URL:         http://www.python.org
# Maintainer:  Juergen Daubert, juergen dot daubert at t-online dot de
# Arch Maintainer: Lucas Hazel, lucas at die dot net dot au
# Depends on:  db, gdbm, ncurses, openssl, readline, zlib

name=python
version=2.5.2
release=2
source=(http://www.python.org/ftp/$name/$version/Python-$version.tar.bz2 \
        $name-$version.patch)

build () {
    cd Python-$version

    patch -p1 -i $SRC/$name-$version.patch
    ./configure --prefix=/usr \
                --mandir=/usr/man \
                --enable-shared \
                --with-threads \
                --enable-ipv6
    make
    make -j1 DESTDIR=$PKG install

    ln -sf python2.5 $PKG/usr/bin/python
    ln -s python2.5 $PKG/usr/lib/python
    ln -s python2.5 $PKG/usr/include/python
    ln -s /usr/lib/libpython2.5.so $PKG/usr/lib/python2.5/config/libpython2.5.so

    rm -r $PKG/usr/lib/python/{bsddb,ctypes,email,sqlite3}/test
    rm -r $PKG/usr/lib/python/distutils/tests
    rm $PKG/usr/lib/python/{distutils,site-packages,test}/README
    rm $PKG/usr/lib/python/idlelib/{ChangeLog,{NEWS,README,TODO}.txt}
    rm $PKG/usr/lib/python/ctypes/macholib/README.ctypes
}
