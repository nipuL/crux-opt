# Maintainer: Simone Rota, sip at crux dot nu
# Description: Java 2 Software Development Kit
# URL: http://java.sun.com

name=jre
version=1.6.0_06
release=1
source=(http://download.java.net/dlj/binaries/jdk-6u6-dlj-linux-i586.bin)

build(){
	sh $SRC/jdk-*.bin --accept-license --unpack

	cd jdk$version
	rm jre/lib/*/libsaproc.so

	mkdir -p jre/man/man1	
	man=(java javaws keytool orbd policytool \
		rmid rmiregistry servertool tnameserv)
	for f in ${man[@]}; do
		cp man/man1/$f.1 jre/man/man1
	done

	mkdir -p $PKG/usr/lib
	mv jre $PKG/usr/lib/jre$version
	cd $PKG/usr/lib
	ln -s jre* java

	mkdir -p $PKG/usr/bin && cd $PKG/usr/bin
	for j in java javaws keytool; do
		ln -s ../lib/java/bin/$j
	done

	# fix for xcb assertions
	sed -i 's/XINERAMA/FAKEEXTN/g' \
		$PKG/usr/lib/java/lib/i386/xawt/libmawt.so	
}

