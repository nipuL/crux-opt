# Description: Embedded video player for Firefox
# URL: http://mplayerplug-in.sourceforge.net
# Maintainer: Jose V Beneyto, sepen at users dot sourceforge dot net
# Arch Maintainer: Lucas Hazel, lucas at die dot net dot au
# Packager: sten, nick dot steeves at shaw dot ca
# Depends on: mplayer, xulrunner

name=mplayerplug-in
version=3.55
release=1
source=(http://dl.sourceforge.net/sourceforge/$name/$name-$version.tar.gz)

build () {
  cd $name-$version
  
  sed -i 's|MOZILLA_HOME=`$PKG_CONFIG --variable=libdir libxul`|MOZILLA_HOME=`$PKG_CONFIG --variable=sdkdir libxul`/bin|' configure
  sed -i 's|GECKO_IDLDIR=`$PKG_CONFIG --variable=idldir libxul`|GECKO_IDLDIR=`$PKG_CONFIG --variable=idldir libxul`/stable|' configure

  ./configure --prefix=/usr \
              --with-x \
              --enable-gtk2 \
              --disable-nls
  make
  
  install -d $PKG/usr/lib/firefox/{plugins,components}
  cp $SRC/$name-$version/mplayerplug-in*.so $PKG/usr/lib/firefox/plugins
  cp $SRC/$name-$version/mplayerplug-in*.xpt $PKG/usr/lib/firefox/components
}
