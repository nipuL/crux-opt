# Description: Network Sniffer with nice GTK+ UI
# URL: http://www.ethereal.com
# Packager: Martin Opel, mo at obbl-net dot de
# Maintainer: Tilman Sauerbeck, tilman at crux dot nu
# Depends on: glib gtk libpcap
# Nice to have: libpcre

name=ethereal
version=0.99.0
release=1
source=(ftp://ftp.uni-kl.de/pub/$name/$name-$version.tar.bz2)

build() {
	cd $name-$version
	export LDFLAGS="-L$PKG/usr/lib $LDFLAGS"
	./configure --prefix=/usr --disable-nls --enable-snmp --enable-gtk2
	make
	make DESTDIR=$PKG install
	sed -i -e "s|$PKG||g" -e "s|-L$SRC/$name-$version/epan||" \
	    $PKG/usr/lib/{,$name/plugins/$version}/*.la

	# install some icons
	install -d $PKG/usr/share/$name/pixmaps
	install -m 644 \
		image/{elogo3d48x48,hi??-app-ethereal,lo??-app-ethereal}.png \
		$PKG/usr/share/$name/pixmaps
}
