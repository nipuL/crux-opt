# Description: Scanner Access Now Easy - Scanner driver for Linux
# URL:         http://www.sane-project.org/
# Maintainer:  Juergen Daubert, juergen dot daubert at t-online dot de
# Depends on:  libusb-compat libjpeg

name=sane
version=1.0.20
release=2
source=(ftp://ftp.sane-project.org/pub/$name/$name-backends-$version/$name-backends-$version.tar.gz
        $name-$version-udev_rule.patch)

build () {
    cd $name-backends-$version

    patch -p1 -i $SRC/$name-$version-udev_rule.patch

    ./configure --prefix=/usr \
                --mandir=/usr/man \
                --localstatedir=/var \
                --disable-translations \
                --enable-locking \
                --with-group=scanner
    make
    make -j1 DESTDIR=$PKG install

    install -D -m 644 tools/udev/libsane.rules $PKG/etc/udev/rules.d/85-libsane.rules

    chown root:root $PKG/{var,var/lock}
    chmod 0755 $PKG/var
    chmod 1777 $PKG/var/lock

    rm -r $PKG/usr/{doc,share}
}
