# Maintainer: Jay Dolan, jdolan at jdolan dot dyndns dot org
# Description: Java 2 Runtime Environment
# URL: http://java.sun.com

# Please download the source files from http://java.sun.com after
# accepting the license terms, and place them in this directory.

name=j2re
version=1.5.0_07
release=1
source=(file:///jre-${version//./_}-linux-i586.bin)

build(){
	sed -i 's|more <<"EOF"|cat <<"EOF"|' jre-*.bin
	mkdir -p $PKG/usr/lib; cd $PKG/usr/lib
	yes | sh $SRC/jre-*.bin

	export GLOBIGNORE="*/man1"
	rm -rf jre*/{man/,lib/javaws/messages_,demo,sample}*
	rm -rf jre*/lib/fontconfig.{RedHat,SuSE,Sun,Turbo}.*
	rm -rf jre*/plugin/i386/ns7-gcc29

	for i in jre*/*; do
		test -f $i && rm -rf $i;
	done

	ln -s jre* java

	mkdir -p $PKG/usr/bin && cd $PKG/usr/bin
	for j in java javaws keytool; do
		ln -s ../lib/java/bin/$j
	done
}
